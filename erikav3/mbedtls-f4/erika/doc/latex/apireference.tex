\doxysection{ERIKA3 API reference }
\hypertarget{apireference}{}\label{apireference}\index{ERIKA3 API reference@{ERIKA3 API reference}}
\hypertarget{apireference_api-intro}{}\doxysubsection{\texorpdfstring{Introduction}{Introduction}}\label{apireference_api-intro}
This section contains a description of the various APIs provided by ERIKA3. In the description of those APIs, please note that ERIKA3 can be configured to allow a normal (named Standard Status) or extended (named Extended Status) error recognition.

Extended status is mainly used to check as many errors as possible during the Debug phase. Once the application has been debugged, some error checking can be disabled, saving execution time and code footprint. Standard and Extended status are enabled in the OIL configuration file. When describing ERIKA3 primitive return values, an {\itshape (Extended)} token near the error description means that the error is raised only when the system runs with extended status.\hypertarget{apireference_api-cc}{}\doxysubsection{\texorpdfstring{Conformance and Scalability Classes}{Conformance and Scalability Classes}}\label{apireference_api-cc}
The OSEK/\+VDX standard traditionally provided a set of configurations, named {\itshape Conformance Classes} aimed to identify subsets of the OS API. The main idea behind these subsets is to reduce the OS footprint by removing functionalities not needed in a specific application configuration. The idea of Conformance Classes has been later on expanded by the AUTOSAR OS, which provided four {\itshape Scalability Classes} meant to selectively expand the OSEK/\+VDX API with functionality such as Memory and timing protection.

In order to support this kind of configurability, the ERIKA3 Kernel provides the following features\+:
\begin{DoxyItemize}
\item The OSEK/\+VDX Conformance Classes can be directly specified using the {\itshape KERNEL} attribute in the {\itshape OS} part of the OIL File.
\item The AUTOSAR OS Scalability Classes are not directly specifiable as a configuration option because the various AUTOSAR OS Extensions to OSEK/\+VDX can be selected one by one directly in the OIL file (or in the AUTOSAR XML File).
\end{DoxyItemize}

About the Conformance Classes, there are four Conformance Classes, named BCC1, BCC2, ECC1, ECC2.

Conformance classes starting with the letter {\itshape B} (that is, BCC1 and BCC2) only support Basic Tasks. Conformance classes starting with the letter {\itshape E} (that is, ECC1 and ECC2) support both Basic Tasks and Extended Tasks.

BCC1 and BCC2 conformance classes are designed to be as small as possible, and in particular these conformance classes are the most suited to implement small concurrent systems with little RAM footprint, thanks to the stack sharing that can be obtained between basic tasks.

ECC1 and ECC2 conformance classes are designed to support synchronization primitives that implies the usage of separate stacks.

Conformance classes ending with the number 1 (that is, BCC1 and ECC1) does not store pending activations. Conformance classes ending with the number 2 (that is, BCC2 and ECC2) allow Basic Tasks to have one or more pending activations (the exact number is specified in the {\itshape ACTIVACTION} parameter of the {\itshape TASK} object in the OIL file.

More than one task with the same priority can coexist at the same time for all the four conformance classes.

The ready queue implementation used in the actual configuration can be specified with the {\itshape RQ} attribute. Possible values are\+:


\begin{DoxyItemize}
\item {\itshape LL}, which stands for {\itshape Linked List}, which is a linear queue with {\itshape O(n)} access time where n is the number of tasks in the ready queue (using a linear queue allow the minimization of the overall OS RAM footprint).
\item {\itshape MQ}, which stands for {\itshape Multiple Queues}, which is a bitfield implementation that exposes an {\itshape O(1)} complexity that is independent on the number of tasks in the system. The system maps each separate priority in a bitfield, and the data type storing the task priority is statically defined to be the smallest type (8, 16, 31, or 64 bit) able to store all the system priorities.
\end{DoxyItemize}

The following is an example of configuration of the conformance class inside the OIL file\+: \begin{DoxyVerb}KERNEL_TYPE = OSEK {
  CLASS = ECC1;
  RQ = MQ;
};
\end{DoxyVerb}


Tasks, Resources, Alarms, and Application modes are codified as integers, so there can be up to {\itshape 2\texorpdfstring{$^\wedge$}{\string^}n-\/1} different entities, where {\itshape n} is the number of bits of the CPU register width (e.\+g., 32 for a 32 bit CPU). Please note that for multicores these IDs are assigned incrementally across the system (and not locally to each core as it happened with ERIKA2).

The following Table shows the current limits with respect to the number of OS objects allowed in the system. {\itshape nbits} means the number of bits stored in a microcontroller register (16 on a 16 bit machine, 32 on a 32 bit machine, with a minimum value of 16).

\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{5}{|X[-1]}|}
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Feature  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ BCC1  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ BCC2  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ ECC1  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ ECC2  }\\\cline{1-5}
\endfirsthead
\hline
\endfoot
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Feature  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ BCC1  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ BCC2  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ ECC1  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ ECC2  }\\\cline{1-5}
\endhead
Multiple requesting of task activation  &no  &yes  &no  &BT\+: yes; ET\+: no  \\\cline{1-5}
Number of tasks which are not in the {\itshape suspended} state  &memory only limit  &memory only limit  &memory only limit (any combination of BT/\+ET)  &memory only limit (any combination of BT/\+ET)  \\\cline{1-5}
More than one task per priority  &yes  &yes  &yes  &yes  \\\cline{1-5}
Number of events per task  &-\/  &-\/  &nbits  &nbits  \\\cline{1-5}
Number of task priorities  &max 127  &max 127  &max 127  &max 127  \\\cline{1-5}
Resources  &{\itshape 2\texorpdfstring{$^\wedge$}{\string^}nbits-\/1} (including RES\+\_\+\+SCHEDULER)  &{\itshape 2\texorpdfstring{$^\wedge$}{\string^}nbits-\/1} (including RES\+\_\+\+SCHEDULER)  &{\itshape 2\texorpdfstring{$^\wedge$}{\string^}nbits-\/1} (including RES\+\_\+\+SCHEDULER)  &{\itshape 2\texorpdfstring{$^\wedge$}{\string^}nbits-\/1} (including RES\+\_\+\+SCHEDULER)  \\\cline{1-5}
Internal Resources  &no limit  &no limit  &no limit  &no limit  \\\cline{1-5}
Alarms  &{\itshape 2\texorpdfstring{$^\wedge$}{\string^}\{nbits\}-\/1}  &{\itshape 2\texorpdfstring{$^\wedge$}{\string^}\{nbits\}-\/1}  &{\itshape 2\texorpdfstring{$^\wedge$}{\string^}\{nbits\}-\/1}  &{\itshape 2\texorpdfstring{$^\wedge$}{\string^}\{nbits\}-\/1}  \\\cline{1-5}
Application modes  &{\itshape 2\texorpdfstring{$^\wedge$}{\string^}\{nbits\}-\/1}  &{\itshape 2\texorpdfstring{$^\wedge$}{\string^}\{nbits\}-\/1}  &{\itshape 2\texorpdfstring{$^\wedge$}{\string^}\{nbits\}-\/1}  &{\itshape 2\texorpdfstring{$^\wedge$}{\string^}\{nbits\}-\/1}  \\\cline{1-5}
\end{longtabu}
\hypertarget{apireference_api-primitives}{}\doxysubsection{\texorpdfstring{Available primitives}{Available primitives}}\label{apireference_api-primitives}
ERIKA3 provides a set of primitives that can be called in different situations. The complete list of primitives is listed in the Table below, together with the locations where it is legal to call these functions. {\itshape X(\texorpdfstring{$\ast$}{*})} means that the feature is an additional feature of ERIKA3 that is not part of the OSEK Standard. {\itshape X(\texorpdfstring{$^\wedge$}{\string^})} means that the function cannot be called with "{}himself"{} as parameter. {\itshape C} indicates that validity is only Checked in Extended status by E\+\_\+\+OS\+\_\+\+CALLEVEL

The first table is related to the usage in Tasks, ISR, Alarm Callback

\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{12}{|X[-1]}|}
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Service  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Idle Hook  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Task  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ ISR1  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ ISR2  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Error Hook  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Pre\+Task Hook  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Post\+Task Hook  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Startup Hook  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Shutdown Hook  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Alarm Callback  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Protection Hook  }\\\cline{1-12}
\endfirsthead
\hline
\endfoot
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Service  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Idle Hook  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Task  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ ISR1  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ ISR2  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Error Hook  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Pre\+Task Hook  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Post\+Task Hook  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Startup Hook  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Shutdown Hook  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Alarm Callback  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Protection Hook  }\\\cline{1-12}
\endhead
\doxylink{group__primitives-task_gacd33f94ca57ea3776a0bf73b4ec6963c}{Activate\+Task()}  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &&&&&&&\\\cline{1-12}
\doxylink{group__primitives-task_gaa59687009cf4d45c57eccd0366920e39}{Terminate\+Task()}  &&X  &&C  &&&&&&&\\\cline{1-12}
\doxylink{group__primitives-task_gaa219f309dc9471326804fda45f2fe449}{Chain\+Task()}  &&X  &&C  &&&&&&&\\\cline{1-12}
\doxylink{group__primitives-task_ga51ead35687ec6feef92e3724fe359215}{Schedule()}  &&X  &&C  &&&&&&&\\\cline{1-12}
\doxylink{group__primitives-task_gad10ed918ccfb72d1b9fabcb90757a8c7}{Get\+Task\+ID()}  &&X  &&X  &X  &X  &X  &&&&X  \\\cline{1-12}
\doxylink{group__primitives-task_gaa6238f0238d1cc28f6b09841026b31f5}{Get\+Task\+State()}  &X(\texorpdfstring{$\ast$}{*}\texorpdfstring{$^\wedge$}{\string^})  &X  &&X(\texorpdfstring{$^\wedge$}{\string^})  &X  &X  &X  &&&&\\\cline{1-12}
\doxylink{group__primitives-interrupt_ga11f3ad730a6453e0679ae7942c200758}{Disable\+All\+Interrupts()}  &X(\texorpdfstring{$\ast$}{*})  &X  &X  &X  &&&&&&&\\\cline{1-12}
\doxylink{group__primitives-interrupt_gab297295738404ae35ffa0e95e04c2bd0}{Enable\+All\+Interrupts()}  &X(\texorpdfstring{$\ast$}{*})  &X  &X  &X  &&&&&&&\\\cline{1-12}
\doxylink{group__primitives-interrupt_ga813ff2800ad6ce0d75ba1aa9c80c4528}{Suspend\+All\+Interrupts()}  &X(\texorpdfstring{$\ast$}{*})  &X  &X  &X  &X  &X  &X  &&&X  &\\\cline{1-12}
\doxylink{group__primitives-interrupt_ga02482b1086521e0b72a799fdb1c88840}{Resume\+All\+Interrupts()}  &X(\texorpdfstring{$\ast$}{*})  &X  &X  &X  &X  &X  &X  &&&X  &\\\cline{1-12}
\doxylink{group__primitives-interrupt_gad5809f893806277ec01033d78a9e0479}{Suspend\+OSInterrupts()}  &X(\texorpdfstring{$\ast$}{*})  &X  &X  &X  &&&&&&&\\\cline{1-12}
\doxylink{group__primitives-interrupt_ga1c1e35bddc81119cb8ea23276ffe9054}{Resume\+OSInterrupts()}  &X(\texorpdfstring{$\ast$}{*})  &X  &X  &X  &&&&&&&\\\cline{1-12}
\doxylink{group__primitives-resource_ga029c759ca879fd237a4a3cc7234c9203}{Get\+Resource()}  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &&&&&&&\\\cline{1-12}
\doxylink{group__primitives-resource_ga17c54e2aa306b4d6a3f233c5cbc411c5}{Release\+Resource()}  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &&&&&&&\\\cline{1-12}
\doxylink{group__primitives-event_ga608b6cdb28c571851ba46f7eb43827f0}{Set\+Event()}  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &&&&&&&\\\cline{1-12}
\doxylink{group__primitives-event_ga755af02db1981deffb5c90e1a25e56f1}{Clear\+Event()}  &&X  &&C  &&&&&&&\\\cline{1-12}
\doxylink{group__primitives-event_gab23a2cca74859ca98752fbc5d4a3f8eb}{Get\+Event()}  &X(\texorpdfstring{$\ast$}{*}\texorpdfstring{$^\wedge$}{\string^})  &X  &&X(\texorpdfstring{$^\wedge$}{\string^})  &X  &X  &X  &&&&\\\cline{1-12}
\doxylink{group__primitives-event_ga01ccee0d30cdc7288a518351244b16b7}{Wait\+Event()}  &&X  &&C  &&&&&&&\\\cline{1-12}
\doxylink{group__primitives-alarm_ga78857b9c7e1e33d9b1fb342eb1637e4d}{Get\+Alarm\+Base()}  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &X  &X  &X  &&&&\\\cline{1-12}
\doxylink{group__primitives-alarm_gae1b7cd18088b6187b1c3ea95562fe097}{Get\+Alarm()}  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &X  &X  &X  &&&&\\\cline{1-12}
\doxylink{group__primitives-alarm_ga98867bff5998f291dd9923e68625f934}{Set\+Rel\+Alarm()}  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &&&&&&&\\\cline{1-12}
\doxylink{group__primitives-alarm_ga3c5237fdfbfcf546621b621657591d77}{Set\+Abs\+Alarm()}  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &&&&&&&\\\cline{1-12}
\doxylink{group__primitives-alarm_ga06987caf9f192223c647e63e1528b8d4}{Cancel\+Alarm()}  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &&&&&&&\\\cline{1-12}
\doxylink{group__primitives-startup_ga2f51dced29e210f8284c66dc4d03d8b7}{Get\+Active\+Application\+Mode()}  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &X  &X  &X  &X  &X  &&\\\cline{1-12}
\doxylink{group__primitives-startup_ga1c71c32e3d5e1d67037b86488e6410af}{Start\+OS()}  &&&&&&&&&&&\\\cline{1-12}
\doxylink{group__primitives-startup_gaa110c81c8e96f95f3d6780b967a03334}{Shutdown\+OS()}  &&X  &&X  &X  &&&X  &&&\\\cline{1-12}
Get\+Application\+ID()  &&X  &&X  &X  &X  &X  &X  &X  &&X  \\\cline{1-12}
\doxylink{group__primitives-interrupt_ga3abe63a806fd59d3a73c39198c977a81}{Get\+ISRID()}  &&X  &&X  &X  &&&&&&X  \\\cline{1-12}
Call\+Trusted\+Function()  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &&&&&&&\\\cline{1-12}
Check\+ISRMemory\+Access()  &X(\texorpdfstring{$\ast$}{*}\texorpdfstring{$^\wedge$}{\string^})  &X  &&X  &X  &&&&&&X  \\\cline{1-12}
Check\+Task\+Memory\+Access()  &X(\texorpdfstring{$\ast$}{*}\texorpdfstring{$^\wedge$}{\string^})  &X  &&X  &X  &&&&&&X  \\\cline{1-12}
Check\+Object\+Access()  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &X  &&&&&&X  \\\cline{1-12}
Check\+Object\+Ownership()  &X(\texorpdfstring{$\ast$}{*}\texorpdfstring{$^\wedge$}{\string^})  &X  &&X  &X  &&&&&&X  \\\cline{1-12}
\doxylink{group__primitives-schtable_gaaf260a1ac822be6b292542d23e80fc19}{Start\+Schedule\+Table\+Rel()}  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &&&&&&&\\\cline{1-12}
\doxylink{group__primitives-schtable_gaf0a5db951a09f28f6b0c7acfa85a27a3}{Start\+Schedule\+Table\+Abs()}  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &&&&&&&\\\cline{1-12}
\doxylink{group__primitives-schtable_ga71420a854f0ce52d6e4f6aeb28293f78}{Stop\+Schedule\+Table()}  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &&&&&&&\\\cline{1-12}
\doxylink{group__primitives-schtable_ga9f184eaa57d8cdf3f6d335319922f973}{Next\+Schedule\+Table()}  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &&&&&&&\\\cline{1-12}
Start\+Schedule\+Table\+Synchron()  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &&&&&&&\\\cline{1-12}
\doxylink{group__primitives-schtable_ga04a278b422ddf9c5b7a069dfb11aae19}{Sync\+Schedule\+Table()}  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &&&&&&&\\\cline{1-12}
\doxylink{group__primitives-schtable_ga778bc80a56bfe1dcdb70864d221cc74f}{Get\+Schedule\+Table\+Status()}  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &&&&&&&\\\cline{1-12}
Set\+Schedule\+Table\+Async()  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &&&&&&&\\\cline{1-12}
\doxylink{group__primitives-alarm_ga553e3a3d7851b14bc70932f9d7155e27}{Increment\+Counter()}  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &&&&&&&\\\cline{1-12}
\doxylink{group__primitives-alarm_ga7d6fb62e946060c5a573e5b0c6f48d3f}{Get\+Counter\+Value()}  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &&&&&&&\\\cline{1-12}
\doxylink{group__primitives-alarm_ga18b00b13cba1a1fc83bb23c34227555e}{Get\+Elapsed\+Value()}  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &&&&&&&\\\cline{1-12}
Terminate\+Application()  &X(\texorpdfstring{$\ast$}{*}\texorpdfstring{$^\wedge$}{\string^})  &X  &&X  &X  &&&&&&\\\cline{1-12}
Allow\+Access()  &&X  &&X  &&&&&&&\\\cline{1-12}
Get\+Application\+State()  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &X  &X  &X  &X  &X  &&X  \\\cline{1-12}
Control\+Idle()  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &&&&&&&\\\cline{1-12}
Get\+Current\+Application\+ID()  &&X  &&X  &X  &X  &X  &X  &X  &&X  \\\cline{1-12}
Read\+Peripheral8()  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &&&&&&&\\\cline{1-12}
Read\+Peripheral16()  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &&&&&&&\\\cline{1-12}
Read\+Peripheral32()  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &&&&&&&\\\cline{1-12}
Write\+Peripheral8()  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &&&&&&&\\\cline{1-12}
Write\+Peripheral32()  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &&&&&&&\\\cline{1-12}
Modify\+Peripheral8()  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &&&&&&&\\\cline{1-12}
Modify\+Peripheral16()  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &&&&&&&\\\cline{1-12}
Modify\+Peripheral32()  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &&&&&&&\\\cline{1-12}
Disable\+Interrupt\+Source()  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &&&&&&&\\\cline{1-12}
Enable\+Interrupt\+Source()  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &&&&&&&\\\cline{1-12}
Clear\+Pending\+Interrupt()  &X(\texorpdfstring{$\ast$}{*})  &X  &&X  &&&&&&&\\\cline{1-12}
\end{longtabu}
