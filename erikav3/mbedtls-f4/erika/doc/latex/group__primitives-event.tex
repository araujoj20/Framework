\doxysection{Event Primitives }
\hypertarget{group__primitives-event}{}\label{group__primitives-event}\index{Event Primitives@{Event Primitives}}


The Event Primitives are related to event handling in Extended Tasks.  


\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{group__primitives-event_ga0fb30e11008d070c248f62a75aed02c1}{Declare\+Event}}(Event)
\begin{DoxyCompactList}\small\item\em Event Declaration. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef \mbox{\hyperlink{ee__api__types_8h_a868892df9018c5b5cd07f92ab7d99a56}{OSEE\+\_\+\+EVENT\+\_\+\+MASK\+\_\+\+TYPE}} \mbox{\hyperlink{group__primitives-event_ga5fb177d72d23ba4ccbd1821ca9e4498f}{Event\+Mask\+Type}}
\begin{DoxyCompactList}\small\item\em Type representing the value of an event mask. \end{DoxyCompactList}\item 
typedef \mbox{\hyperlink{group__primitives-event_ga5fb177d72d23ba4ccbd1821ca9e4498f}{Event\+Mask\+Type}} \mbox{\hyperlink{structTYPEDEF}{TYPEDEF}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{ee__compiler__cfg_8h_a17f96f65d9582f0cfcfd8ad2ab3b7e9f}{OS\+\_\+\+APPL\+\_\+\+DATA}} \mbox{\hyperlink{group__primitives-event_ga71624473b6c4e49dce5fb19a05ccde4e}{Event\+Mask\+Ref\+Type}}
\begin{DoxyCompactList}\small\item\em Pointer to an event mask. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{ee__api__types_8h_a79bf54a17078edb124b553c51129396a}{Status\+Type}} \mbox{\hyperlink{ee__compiler__cfg_8h_a919da7d9b61966c3af796ab42e618bef}{OS\+\_\+\+CODE}} \mbox{\hyperlink{group__primitives-event_ga01ccee0d30cdc7288a518351244b16b7}{Wait\+Event}} (\mbox{\hyperlink{group__primitives-event_ga5fb177d72d23ba4ccbd1821ca9e4498f}{Event\+Mask\+Type}} Mask)
\begin{DoxyCompactList}\small\item\em The calling task waits for one of the events in the Mask. \end{DoxyCompactList}\item 
\mbox{\hyperlink{ee__api__types_8h_a79bf54a17078edb124b553c51129396a}{Status\+Type}} \mbox{\hyperlink{ee__compiler__cfg_8h_a919da7d9b61966c3af796ab42e618bef}{OS\+\_\+\+CODE}} \mbox{\hyperlink{group__primitives-event_ga608b6cdb28c571851ba46f7eb43827f0}{Set\+Event}} (\mbox{\hyperlink{group__primitives-task_ga9733da8629f4d0984967785419b15d4a}{Task\+Type}} Task\+ID, \mbox{\hyperlink{group__primitives-event_ga5fb177d72d23ba4ccbd1821ca9e4498f}{Event\+Mask\+Type}} Mask)
\begin{DoxyCompactList}\small\item\em Set an event mask on an extended task. \end{DoxyCompactList}\item 
\mbox{\hyperlink{ee__api__types_8h_a79bf54a17078edb124b553c51129396a}{Status\+Type}} \mbox{\hyperlink{ee__compiler__cfg_8h_a919da7d9b61966c3af796ab42e618bef}{OS\+\_\+\+CODE}} \mbox{\hyperlink{group__primitives-event_gab23a2cca74859ca98752fbc5d4a3f8eb}{Get\+Event}} (\mbox{\hyperlink{group__primitives-task_ga9733da8629f4d0984967785419b15d4a}{Task\+Type}} Task\+ID, \mbox{\hyperlink{group__primitives-event_ga71624473b6c4e49dce5fb19a05ccde4e}{Event\+Mask\+Ref\+Type}} Event)
\begin{DoxyCompactList}\small\item\em returns the current event mask of an extended task. \end{DoxyCompactList}\item 
\mbox{\hyperlink{ee__api__types_8h_a79bf54a17078edb124b553c51129396a}{Status\+Type}} \mbox{\hyperlink{ee__compiler__cfg_8h_a919da7d9b61966c3af796ab42e618bef}{OS\+\_\+\+CODE}} \mbox{\hyperlink{group__primitives-event_ga755af02db1981deffb5c90e1a25e56f1}{Clear\+Event}} (\mbox{\hyperlink{group__primitives-event_ga5fb177d72d23ba4ccbd1821ca9e4498f}{Event\+Mask\+Type}} Mask)
\begin{DoxyCompactList}\small\item\em Clears the events of the calling task. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Events represents a technique used by ERIKA3 to implement synchronization primitives. Events are assigned to tasks. Tasks with events assigned to are called {\itshape Extended tasks}. Tasks without events assigned to are called {\itshape Basic Tasks}.

Extended tasks are supported only in the ECC1 and ECC2 conformance classes. To assign an event to a task, the event have to be listed inside the task declaration in the OIL configuration file.

Events are implemented as bits in a bit mask. Each task in the system is associated to a bit mask, which is typically as large as a CPU data register. The bit mask is initialized to 0 at system startup.

The status of an extended task event mask can be read by tasks and ISRs using the \doxylink{group__primitives-event_gab23a2cca74859ca98752fbc5d4a3f8eb}{Get\+Event()} primitive. Events can also be set from tasks or ISRs using the \doxylink{group__primitives-event_ga608b6cdb28c571851ba46f7eb43827f0}{Set\+Event()} primitive (more than one event can be set with a single call to \doxylink{group__primitives-event_ga608b6cdb28c571851ba46f7eb43827f0}{Set\+Event()} ).

An extended task can wait for one ore more events from an event mask to be set using the \doxylink{group__primitives-event_ga01ccee0d30cdc7288a518351244b16b7}{Wait\+Event()} primitive. An extended task needs then to explicitly clear an event calling the \doxylink{group__primitives-event_ga755af02db1981deffb5c90e1a25e56f1}{Clear\+Event()} primitive.

Calls to \doxylink{group__primitives-event_ga01ccee0d30cdc7288a518351244b16b7}{Wait\+Event()} may provoke the task to block. For that reason, extended tasks must have a private stack assigned to them. 

\label{doc-define-members}
\Hypertarget{group__primitives-event_doc-define-members}
\doxysubsection{Macro Definition Documentation}
\Hypertarget{group__primitives-event_ga0fb30e11008d070c248f62a75aed02c1}\index{Event Primitives@{Event Primitives}!DeclareEvent@{DeclareEvent}}
\index{DeclareEvent@{DeclareEvent}!Event Primitives@{Event Primitives}}
\doxysubsubsection{\texorpdfstring{DeclareEvent}{DeclareEvent}}
{\footnotesize\ttfamily \label{group__primitives-event_ga0fb30e11008d070c248f62a75aed02c1} 
\#define Declare\+Event(\begin{DoxyParamCaption}\item[{}]{Event}{}\end{DoxyParamCaption})}

Declares an event used by Extended Tasks.

This declaration is currently not mandatory because event identifiers are all declared within the code generated by RT-\/\+Druid.

Reference\+: OSEK OS -\/ ISO 17356-\/3 -\/ 13.\+6.\+2.\+1


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{in}}  & {\em Event} & The event to be declared. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


\label{doc-typedef-members}
\Hypertarget{group__primitives-event_doc-typedef-members}
\doxysubsection{Typedef Documentation}
\Hypertarget{group__primitives-event_ga71624473b6c4e49dce5fb19a05ccde4e}\index{Event Primitives@{Event Primitives}!EventMaskRefType@{EventMaskRefType}}
\index{EventMaskRefType@{EventMaskRefType}!Event Primitives@{Event Primitives}}
\doxysubsubsection{\texorpdfstring{EventMaskRefType}{EventMaskRefType}}
{\footnotesize\ttfamily \label{group__primitives-event_ga71624473b6c4e49dce5fb19a05ccde4e} 
typedef \mbox{\hyperlink{group__primitives-event_ga5fb177d72d23ba4ccbd1821ca9e4498f}{Event\+Mask\+Type}} \mbox{\hyperlink{structTYPEDEF}{TYPEDEF}}\texorpdfstring{$\ast$}{*} \mbox{\hyperlink{ee__compiler__cfg_8h_a17f96f65d9582f0cfcfd8ad2ab3b7e9f}{OS\+\_\+\+APPL\+\_\+\+DATA}} \mbox{\hyperlink{group__primitives-event_ga71624473b6c4e49dce5fb19a05ccde4e}{Event\+Mask\+Ref\+Type}}}

This is a pointer to an \doxylink{group__primitives-event_ga5fb177d72d23ba4ccbd1821ca9e4498f}{Event\+Mask\+Type}. it is used as an \mbox{[}out\mbox{]} parametre to some of the OSEK primitives. \Hypertarget{group__primitives-event_ga5fb177d72d23ba4ccbd1821ca9e4498f}\index{Event Primitives@{Event Primitives}!EventMaskType@{EventMaskType}}
\index{EventMaskType@{EventMaskType}!Event Primitives@{Event Primitives}}
\doxysubsubsection{\texorpdfstring{EventMaskType}{EventMaskType}}
{\footnotesize\ttfamily \label{group__primitives-event_ga5fb177d72d23ba4ccbd1821ca9e4498f} 
typedef \mbox{\hyperlink{ee__api__types_8h_a868892df9018c5b5cd07f92ab7d99a56}{OSEE\+\_\+\+EVENT\+\_\+\+MASK\+\_\+\+TYPE}} \mbox{\hyperlink{group__primitives-event_ga5fb177d72d23ba4ccbd1821ca9e4498f}{Event\+Mask\+Type}}}

This type represents the value of an event mask. Please note that each Extended task has a private mask of events reserved for the usage with the event primitives. The number of events available depend on the architecture and it is typically the size of a microcontroller word. 

\label{doc-func-members}
\Hypertarget{group__primitives-event_doc-func-members}
\doxysubsection{Function Documentation}
\Hypertarget{group__primitives-event_ga755af02db1981deffb5c90e1a25e56f1}\index{Event Primitives@{Event Primitives}!ClearEvent@{ClearEvent}}
\index{ClearEvent@{ClearEvent}!Event Primitives@{Event Primitives}}
\doxysubsubsection{\texorpdfstring{ClearEvent()}{ClearEvent()}}
{\footnotesize\ttfamily \label{group__primitives-event_ga755af02db1981deffb5c90e1a25e56f1} 
\mbox{\hyperlink{ee__api__types_8h_a79bf54a17078edb124b553c51129396a}{Status\+Type}} \mbox{\hyperlink{ee__compiler__cfg_8h_a919da7d9b61966c3af796ab42e618bef}{OS\+\_\+\+CODE}} Clear\+Event (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__primitives-event_ga5fb177d72d23ba4ccbd1821ca9e4498f}{Event\+Mask\+Type}}}]{Mask}{}\end{DoxyParamCaption})}

\doxylink{group__primitives-event_ga755af02db1981deffb5c90e1a25e56f1}{Clear\+Event()} clears the events Mask of the calling task.

This system call is restricted to extended tasks which own the event.

Conformance Classes\+: ECC1, ECC2

Reference\+: OSEK OS -\/ ISO 17356-\/3 -\/ 13.\+6.\+3.\+2


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{in}}  & {\em Mask} & Event Mask to be cleared. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The function returns a \doxylink{ee__api__types_8h_a6def7470ef6da58026579b4be4ff5d68}{Status\+Type}.
\begin{DoxyItemize}
\item E\+\_\+\+OK No error.
\item E\+\_\+\+OS\+\_\+\+ACCESS (Extended) The service has been invoked by a non-\/extended task.
\item E\+\_\+\+OS\+\_\+\+CALLEVEL (Extended) The service has been invoked at the interrupt level. 
\end{DoxyItemize}
\end{DoxyReturn}


References \mbox{\hyperlink{ee__compiler_8h_a3851a1a8ddec9eacd2e30a8a19bb8cc8}{AUTOMATIC}}, \mbox{\hyperlink{group__primitives-event_ga755af02db1981deffb5c90e1a25e56f1}{Clear\+Event()}}, \mbox{\hyperlink{ee__compiler__cfg_8h_a919da7d9b61966c3af796ab42e618bef}{OS\+\_\+\+CODE}}, and \mbox{\hyperlink{ee__compiler_8h_a44fc42ed93abd1afe9c2268543bc8faf}{VAR}}.



Referenced by \mbox{\hyperlink{group__primitives-event_ga755af02db1981deffb5c90e1a25e56f1}{Clear\+Event()}}.

Here is the call graph for this function\+:
% FIG 0
Here is the caller graph for this function\+:
% FIG 1
\Hypertarget{group__primitives-event_gab23a2cca74859ca98752fbc5d4a3f8eb}\index{Event Primitives@{Event Primitives}!GetEvent@{GetEvent}}
\index{GetEvent@{GetEvent}!Event Primitives@{Event Primitives}}
\doxysubsubsection{\texorpdfstring{GetEvent()}{GetEvent()}}
{\footnotesize\ttfamily \label{group__primitives-event_gab23a2cca74859ca98752fbc5d4a3f8eb} 
\mbox{\hyperlink{ee__api__types_8h_a79bf54a17078edb124b553c51129396a}{Status\+Type}} \mbox{\hyperlink{ee__compiler__cfg_8h_a919da7d9b61966c3af796ab42e618bef}{OS\+\_\+\+CODE}} Get\+Event (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__primitives-task_ga9733da8629f4d0984967785419b15d4a}{Task\+Type}}}]{Task\+ID}{, }\item[{\mbox{\hyperlink{group__primitives-event_ga71624473b6c4e49dce5fb19a05ccde4e}{Event\+Mask\+Ref\+Type}}}]{Event}{}\end{DoxyParamCaption})}

This primitive returns the current state of all event bits of the task Task\+ID. The service may be called from interrupt service routines, task level and some hook routines. The current status of the event mask of task Task\+ID is copied to Event. The referenced task shall be an extended task.

Conformance Classes\+: ECC1, ECC2

Reference\+: OSEK OS -\/ ISO 17356-\/3 -\/ 13.\+6.\+3.\+3


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{in}}  & {\em Task\+ID} & The extended task whose mask is to be returned. \\
\hline
\mbox{\texttt{out}}  & {\em Event} & The mask of the extended task. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The function returns a \doxylink{ee__api__types_8h_a6def7470ef6da58026579b4be4ff5d68}{Status\+Type}.
\begin{DoxyItemize}
\item E\+\_\+\+OK No error.
\item E\+\_\+\+OS\+\_\+\+ID (Extended) Reference Task\+ID is invalid.
\item E\+\_\+\+OS\+\_\+\+ACCESS (Extended) Task Task\+ID is not an extended task.
\item E\+\_\+\+OS\+\_\+\+STATE (Extended) Events can not be read as the referenced task is in the SUSPENDED state. 
\end{DoxyItemize}
\end{DoxyReturn}


References \mbox{\hyperlink{ee__compiler_8h_a3851a1a8ddec9eacd2e30a8a19bb8cc8}{AUTOMATIC}}, \mbox{\hyperlink{ee__compiler_8h_aa8f07207960a32e918e08a0faf697977}{FUNC}}, \mbox{\hyperlink{group__primitives-event_gab23a2cca74859ca98752fbc5d4a3f8eb}{Get\+Event()}}, \mbox{\hyperlink{ee__compiler__cfg_8h_a919da7d9b61966c3af796ab42e618bef}{OS\+\_\+\+CODE}}, and \mbox{\hyperlink{ee__compiler_8h_a44fc42ed93abd1afe9c2268543bc8faf}{VAR}}.



Referenced by \mbox{\hyperlink{group__primitives-event_gab23a2cca74859ca98752fbc5d4a3f8eb}{Get\+Event()}}.

Here is the call graph for this function\+:
% FIG 2
Here is the caller graph for this function\+:
% FIG 3
\Hypertarget{group__primitives-event_ga608b6cdb28c571851ba46f7eb43827f0}\index{Event Primitives@{Event Primitives}!SetEvent@{SetEvent}}
\index{SetEvent@{SetEvent}!Event Primitives@{Event Primitives}}
\doxysubsubsection{\texorpdfstring{SetEvent()}{SetEvent()}}
{\footnotesize\ttfamily \label{group__primitives-event_ga608b6cdb28c571851ba46f7eb43827f0} 
\mbox{\hyperlink{ee__api__types_8h_a79bf54a17078edb124b553c51129396a}{Status\+Type}} \mbox{\hyperlink{ee__compiler__cfg_8h_a919da7d9b61966c3af796ab42e618bef}{OS\+\_\+\+CODE}} Set\+Event (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__primitives-task_ga9733da8629f4d0984967785419b15d4a}{Task\+Type}}}]{Task\+ID}{, }\item[{\mbox{\hyperlink{group__primitives-event_ga5fb177d72d23ba4ccbd1821ca9e4498f}{Event\+Mask\+Type}}}]{Mask}{}\end{DoxyParamCaption})}

The events of task Task\+ID are set according to the event mask Mask. The call to \doxylink{group__primitives-event_ga608b6cdb28c571851ba46f7eb43827f0}{Set\+Event()} may cause Task\+ID to wakeup from a \doxylink{group__primitives-event_ga01ccee0d30cdc7288a518351244b16b7}{Wait\+Event()} primitive. Any events not set in the event mask remain unchanged. The service may be called from an interrupt service routine and from the task level, but not from hook routines.

The function can be called from the idle hook.

Conformance Classes\+: ECC1, ECC2

Reference\+: OSEK OS -\/ ISO 17356-\/3 -\/ 13.\+6.\+3.\+1


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{in}}  & {\em Task\+ID} & The extended task on which we will set the event mask. \\
\hline
\mbox{\texttt{in}}  & {\em Mask} & The mask of the extended task. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The function returns a \doxylink{ee__api__types_8h_a6def7470ef6da58026579b4be4ff5d68}{Status\+Type}.
\begin{DoxyItemize}
\item E\+\_\+\+OK No error.
\item E\+\_\+\+OS\+\_\+\+ID (Extended) Reference Task\+ID is invalid.
\item E\+\_\+\+OS\+\_\+\+ACCESS (Extended) Task Task\+ID is not an extended task.
\item E\+\_\+\+OS\+\_\+\+STATE (Extended) Events can not be set as the referenced task is in the SUSPENDED state. 
\end{DoxyItemize}
\end{DoxyReturn}


References \mbox{\hyperlink{ee__compiler_8h_a3851a1a8ddec9eacd2e30a8a19bb8cc8}{AUTOMATIC}}, \mbox{\hyperlink{ee__compiler_8h_aa8f07207960a32e918e08a0faf697977}{FUNC}}, \mbox{\hyperlink{ee__compiler__cfg_8h_a919da7d9b61966c3af796ab42e618bef}{OS\+\_\+\+CODE}}, \mbox{\hyperlink{group__primitives-event_ga608b6cdb28c571851ba46f7eb43827f0}{Set\+Event()}}, and \mbox{\hyperlink{ee__compiler_8h_a44fc42ed93abd1afe9c2268543bc8faf}{VAR}}.



Referenced by \mbox{\hyperlink{group__primitives-event_ga608b6cdb28c571851ba46f7eb43827f0}{Set\+Event()}}.

Here is the call graph for this function\+:
% FIG 4
Here is the caller graph for this function\+:
% FIG 5
\Hypertarget{group__primitives-event_ga01ccee0d30cdc7288a518351244b16b7}\index{Event Primitives@{Event Primitives}!WaitEvent@{WaitEvent}}
\index{WaitEvent@{WaitEvent}!Event Primitives@{Event Primitives}}
\doxysubsubsection{\texorpdfstring{WaitEvent()}{WaitEvent()}}
{\footnotesize\ttfamily \label{group__primitives-event_ga01ccee0d30cdc7288a518351244b16b7} 
\mbox{\hyperlink{ee__api__types_8h_a79bf54a17078edb124b553c51129396a}{Status\+Type}} \mbox{\hyperlink{ee__compiler__cfg_8h_a919da7d9b61966c3af796ab42e618bef}{OS\+\_\+\+CODE}} Wait\+Event (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__primitives-event_ga5fb177d72d23ba4ccbd1821ca9e4498f}{Event\+Mask\+Type}}}]{Mask}{}\end{DoxyParamCaption})}

The calling task blocks if none of the events specified in Mask are set.

If the calling task blocks, the system is reschedule, and the Internal resource of the task is released. This service shall only be called from the extended task owning the events.

Conformance Classes\+: ECC1, ECC2

Reference\+: OSEK OS -\/ ISO 17356-\/3 -\/ 13.\+6.\+3.\+4


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{in}}  & {\em Mask} & Mask of the event waited for. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The function returns a \doxylink{ee__api__types_8h_a6def7470ef6da58026579b4be4ff5d68}{Status\+Type}.
\begin{DoxyItemize}
\item E\+\_\+\+OK No error.
\item E\+\_\+\+OS\+\_\+\+ACCESS (Extended) Task Task\+ID is not an extended task.
\item E\+\_\+\+OS\+\_\+\+RESOURCE (Extended) Calling task occupies resources.
\item E\+\_\+\+OS\+\_\+\+CALLLEVEL (Extended) Call at interrupt level. 
\end{DoxyItemize}
\end{DoxyReturn}


References \mbox{\hyperlink{ee__compiler_8h_a3851a1a8ddec9eacd2e30a8a19bb8cc8}{AUTOMATIC}}, \mbox{\hyperlink{ee__compiler_8h_aa8f07207960a32e918e08a0faf697977}{FUNC}}, \mbox{\hyperlink{ee__compiler__cfg_8h_a919da7d9b61966c3af796ab42e618bef}{OS\+\_\+\+CODE}}, \mbox{\hyperlink{ee__compiler_8h_a44fc42ed93abd1afe9c2268543bc8faf}{VAR}}, and \mbox{\hyperlink{group__primitives-event_ga01ccee0d30cdc7288a518351244b16b7}{Wait\+Event()}}.



Referenced by \mbox{\hyperlink{group__primitives-event_ga01ccee0d30cdc7288a518351244b16b7}{Wait\+Event()}}.

Here is the call graph for this function\+:
% FIG 6
Here is the caller graph for this function\+:
% FIG 7
